(define (domain hospital)
    (:types robot location room - object
            MoveRobot CleanerRobot - robot)
    (:predicates
        (at ?r - robot ?l - location)
        (hascapability ?r - robot ?c - capability)
        (half-clean ?rm - room)
        (clean ?rm - room)
        (prepared ?rm - room)
        (sanitized ?r - robot)
    )
    (:functions 
        (calc-cleaning-time ?r - CleanerRobot ?rm - room)
    )
    (:capabilities moveobject cleaning sanitize)
    (:rewards time)

    (:task RoomCleaning :parameters (?r - CleanerRobot ?rm - room ?rloc - location))
    (:method room-cleaning
        :parameters (?r - CleanerRobot ?rm - room ?rloc - location)
        :task (RoomCleaning ?r ?rm ?rloc)
        :precondition ()
        :subtasks (and
            (clean-room1 ?r ?rm ?rloc)
            (RoomCleaning ?r ?rm ?rloc)
        )
    )
    (:method room-cleaning2
        :parameters (?r - CleanerRobot ?rm - room ?rloc - location)
        :task (RoomCleaning ?r ?rm ?rloc)
        :precondition ()
        :subtasks (and
            (clean-room2 ?r ?rm ?rloc)
            (RoomCleaning ?r ?rm ?rloc)
        )
    )
    (:method room-cleaning-finish
        :parameters (?r - CleanerRobot ?rm - room ?rloc - location)
        :task (RoomCleaning ?r ?rm ?rloc)
        :precondition ()
        :subtasks (and
            (finish-cleaning ?r ?rm ?rloc)
        )
    )

    (:action clean-room1
        :parameters (?rob - CleanerRobot ?rmm - room ?rl - location)
        :required-capabilities (cleaning)
        :precondition (and
            (at ?rob ?rl)
            (not (half-clean ?rmm))
            (hascapability ?rob cleaning)
        )
        :effect (and
            (half-clean ?rmm)
            (rewardchange increase (time) (calc-cleaning-time ?rob ?rmm))
        )
        :reliability (relClean)
    )
    (:action clean-room2
        :parameters (?r - CleanerRobot ?rm - room ?rloc - location)
        :required-capabilities (cleaning)
        :precondition (and
            (at ?r ?rloc)
            (not (half-clean ?rm))
            (hascapability ?r cleaning)
        )
        :effect (and
            (half-clean ?rm)
            (rewardchange increase (time) (calc-cleaning-time ?r ?rm))
        )
        :reliability (relClean)
    )
    (:action finish-cleaning
        :parameters (?r - CleanerRobot ?rm - room ?rloc - location)
        :required-capabilities (cleaning)
        :precondition (and
            (at ?r ?rloc)
            (half-clean ?rm)
            (not (clean ?rm))
            (hascapability ?r cleaning)
        )
        :effect (and
            (clean ?rm)
            (rewardchange increase (time) (calc-cleaning-time ?r ?rm))
        )
        :reliability (relFClean)
    )
    
    (:task FurnitureMoving :parameters (?r1 ?r2 - MoveRobot ?rm - room ?r1loc ?r2loc - location))
    (:method furniture-moving
        :parameters (?r1 ?r2 - MoveRobot ?rm - room ?r1loc ?r2loc - location)
        :task (FurnitureMoving ?r1 ?r2 ?rm ?r1loc ?r2loc)
        :precondition ()
        :subtasks(and
            (move-furniture ?r1 ?r2 ?r1loc ?r2loc ?rm)
        )
    )

    (:action move-furniture
        :parameters (?r1 ?r2 - robot ?r1loc ?r2loc - location ?rm - room)
        :required-capabilities (moveobject)
        :precondition (and
            (at ?r1 ?r1loc)
            (at ?r2 ?r2loc)
            (hascapability ?r1 moveobject)
            (hascapability ?r2 moveobject)
        )
        :effect (and
            (rewardchange increase (time) 40)
            (prepared ?rm)
        )
        :reliability (relMove)
    )

    (:task RobotSanitization :parameters (?r - CleanerRobot ?srm - room ?rloc - location))
    (:method robot-sanitization
        :parameters (?r - CleanerRobot ?srm - room ?rloc - location)
        :task (RobotSanitization ?r ?srm ?rloc)
        :precondition ()
        :subtasks (and
            (sanitize-robot ?r ?srm ?rloc)
        )
    )

    (:action sanitize-robot
        :parameters (?r - CleanerRobot ?srm - room ?rloc - location)
        :required-capabilities (sanitize)
        :precondition (and
            (at ?r ?rloc)
            (not (sanitized ?r))
            (hascapability ?r sanitize)
        )
        :effect (and
            (sanitized ?r)
            (rewardchange increase (time) 50.4)
        )
    )
)